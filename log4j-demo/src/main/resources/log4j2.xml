<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="INFO" packages="com.masking">
    <!-- Logging Properties -->
    <Properties>
        <Property name="LOG_PATTERN">%d{yyyy-MM-dd HH:mm:ss.SSS} %X{conversationID} [%p] - %c{1} - %m %maskPhone %n</Property>
        <Property name="APP_LOG_ROOT">D:/app/log4j/logs</Property>
    </Properties>
    <Appenders>
		
        <!-- Console Appender -->
        <Console name="Console" target="SYSTEM_OUT" follow="true">
            <PatternLayout pattern="${LOG_PATTERN}"/>
        </Console>
        
        <!-- Daily log file appender -->
        <RollingFile name="appServicesRollingFile" fileName="${APP_LOG_ROOT}/app-services-daily.log"
            filePattern="${APP_LOG_ROOT}/app-services-daily.log.%d{yyyy-MM-dd}">
            <PatternLayout pattern="${LOG_PATTERN}"/>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" />
            </Policies>
            <DefaultRolloverStrategy>
				<Delete basePath="${APP_LOG_ROOT}/">
					<IfFileName glob="app-services-daily*"/>
					<IfLastModified age="P${bundle:application:dailyLogRetentionPeriod}D"></IfLastModified>
				</Delete>
				</DefaultRolloverStrategy>
        </RollingFile>
        
         <!-- File appender INFO -->
        <RollingFile name="appServicesRollingFileInfo" fileName="${APP_LOG_ROOT}/app-services.log"
            filePattern="${APP_LOG_ROOT}/app-services.log.%i">
            <PatternLayout pattern="${LOG_PATTERN}"/>
            <Policies>
                <SizeBasedTriggeringPolicy size="10MB" />
            </Policies>
            <DefaultRolloverStrategy max="30"></DefaultRolloverStrategy>
        </RollingFile>
        
           <!-- File appender ERROR -->
        <RollingFile name="appServicesRollingFileError" fileName="${APP_LOG_ROOT}/app-services-error.log"
            filePattern="${APP_LOG_ROOT}/app-services-error.log.%i">
            <PatternLayout pattern="${LOG_PATTERN}"/>
             <LevelRangeFilter minLevel="ERROR" maxLevel="ERROR"/>
            <Policies>
                <SizeBasedTriggeringPolicy size="10MB" />
            </Policies>
            <DefaultRolloverStrategy max="30"></DefaultRolloverStrategy>
        </RollingFile>
        
         
           <!-- File appender WARN -->
        <RollingFile name="appServicesRollingFileWarn" fileName="${APP_LOG_ROOT}/app-services-security.log"
            filePattern="${APP_LOG_ROOT}/app-services-security.log.%i">
            <PatternLayout pattern="${LOG_PATTERN}"/>
             <LevelRangeFilter minLevel="WARN" maxLevel="WARN"/>
            <Policies>
                <SizeBasedTriggeringPolicy size="10MB" />
            </Policies>
            <DefaultRolloverStrategy max="30"></DefaultRolloverStrategy>
        </RollingFile>
        
    </Appenders>
    <Loggers>
       
        <Root level="INFO" additivity="false">
            <AppenderRef ref="Console"/>
             <AppenderRef ref="appServicesRollingFile"/>
              <AppenderRef ref="appServicesRollingFileInfo"/>
               <AppenderRef ref="appServicesRollingFileError"/>
                <AppenderRef ref="appServicesRollingFileWarn"/>
        </Root>
    </Loggers>
</Configuration>